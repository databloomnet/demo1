<h2>Converse with ChatGPT</h2>

<p>This session will reset after 5 minutes of inactivity.</p>

<p>{{ intro_title }}</p>
<ul>
  {% for item in intro_bullets %}
    <li>{{ item }}</li>
  {% endfor %}
</ul>

<form method="post">
	<label for="api_key">OpenAI api key:</label><br>
	<input type="text" name="api_key" id="api_key"
	       value="{{ openai_api_key }}"
	       placeholder="sk-..." style="width: 400px;"><br><br>

    <label for="user_prompt">Your message:</label><br>
	<textarea name="user_prompt" id="user_prompt" rows="4" style="width: 600px;" required>{{ user_prompt }}</textarea><br>
	<button type="submit">Send</button>
</form>

<hr>

{% if chat_history %}
<h3>Conversation History:</h3>
<div style="white-space: pre-wrap; font-family: monospace; border: 1px solid #ccc; padding: 10px;">
    {% for entry in chat_history %}
        <strong>{{ entry.role.capitalize() }}:</strong> {{ entry.content }}<br><br>
    {% endfor %}
</div>
{% endif %}

{% if error %}
    <div style="color: white; background-color: red; padding: 10px; margin-top: 10px;">
        <strong>Error:</strong> {{ error }}
    </div>
{% endif %}

<p style="margin-top: 20px;"><a href="/">‚Üê Back to Home</a></p>
