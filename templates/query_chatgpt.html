<h2>Query ChatGPT</h2>

<p>{{ intro_title }}</p>
<ul>
  {% for item in intro_bullets %}
    <li>{{ item }}</li>
  {% endfor %}
</ul>

<form method="post">
	{# nothing #}
	{#
	<label for="api_key">OpenAI api key:</label><br>
	<input type="text" name="api_key" id="api_key"
	       value="{{ openai_api_key }}"
	       placeholder="sk-..." style="width: 400px;"><br><br>
	#}


	{% if api_key_saved or session.get('openai_api_key') %}
	  <p>âœ… OpenAI API key saved for this session.
	    <br><a href="{{ url_for('main.forget_keys') }}" style="margin-left: 1em;">Forget all API keys</a>
	  </p>
	  <!-- Hide input box to prevent access -->
	{% else %}
	  <label for="api_key">OpenAI API key:</label><br>
	  <input type="password" name="api_key" id="api_key" placeholder="sk-..." style="width: 400px;" required><br><br>
	{% endif %}


	<label for="user_prompt">Ask ChatGPT: </label><br>
	<textarea name="user_prompt" id="user_prompt" rows="4" style="width: 600px;" required>{{ user_prompt }}</textarea><br>
	<button type="submit">Send</button>
</form>

{% if response %}
    <h3>ChatGPT Response:</h3>
    <div style="white-space: pre-wrap; border: 1px solid #ccc; padding: 10px; margin-top: 10px;">
        {{ response }}
        {{ message_footer }}
    </div>

{% endif %}


{% if error %}
    <h3 style="color: red;">Error:</h3>
    <div>{{ error }}</div>
{% endif %}

<p><a href="/">Back to Home</a></p>
